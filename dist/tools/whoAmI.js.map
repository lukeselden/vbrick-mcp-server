{"version":3,"file":"whoAmI.js","names":[],"sources":["../../src/tools/whoAmI.ts"],"sourcesContent":["import { config } from \"../config.ts\";\r\nimport { makeVbrickRevApiRequest, formatResponse } from \"../vbrickUtilities.ts\";\r\n\r\nexport const whoAmITool = {\r\n  name: \"vbrick_who_am_i\",\r\n  description: \"Check who is the current logged-in Vbrick Rev user. \" +\r\n                \"Always use this tool first to check if the user is authenticated and get users info.\",\r\n  inputSchema: {},\r\n  async handler() {\r\n    const userUrl = `${config.vbrickRevTenantUrl}/api/v2/users/me`;\r\n    const userData = await makeVbrickRevApiRequest<any>(userUrl);\r\n\r\n    if (!userData) {\r\n      return formatResponse(\"Failed to retrieve user data\", \"text\");\r\n    }\r\n\r\n    const responseData = {\r\n      firstname: userData.firstname,\r\n      lastname: userData.lastname,\r\n      email: userData.email,\r\n      username: userData.username\r\n    }\r\n\r\n    return formatResponse(responseData, \"json\");\r\n  }\r\n};\r\n"],"mappings":";;;AAGA,MAAa,aAAa;CACxB,MAAM;CACN,aAAa;CAEb,aAAa,EAAE;CACf,MAAM,UAAU;EAEd,MAAM,WAAW,MAAM,wBADP,GAAG,OAAO,mBAAmB,kBACe;AAE5D,MAAI,CAAC,SACH,QAAO,eAAe,gCAAgC,OAAO;AAU/D,SAAO,eAPc;GACnB,WAAW,SAAS;GACpB,UAAU,SAAS;GACnB,OAAO,SAAS;GAChB,UAAU,SAAS;GACpB,EAEmC,OAAO;;CAE9C"}