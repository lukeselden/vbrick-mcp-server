{"version":3,"file":"searchVideos.js","names":[],"sources":["../../src/tools/searchVideos.ts"],"sourcesContent":["import { config } from \"../config.ts\";\r\nimport { makeVbrickRevApiRequest, formatResponse } from \"../vbrickUtilities.ts\";\r\nimport { z } from \"zod\";\r\n\r\nexport const searchVideosTool = {\r\n  name: \"vbrick_search_videos\",\r\n  description: \"Search for videos within Vbrick Rev. \" +\r\n               \"The search works with a keyword and returns results in order by best match.\" +\r\n               \"Make sure the user is authenticated or there may not be any results.\",\r\n  inputSchema: {\r\n    query: z.string().describe(\"Search terms, title, description, tags\"),\r\n    count: z.number().min(1).max(100).default(10).describe(\"Number of results to return, the default is 10.\")\r\n  },\r\n  async handler({ query, count }: { query: string; count: number }) {\r\n    const searchUrl = `${config.vbrickRevTenantUrl}/api/v2/videos/search?q=${encodeURIComponent(query)}&count=${count}&sortField=_score&sortDirection=desc`;\r\n    const searchData = await makeVbrickRevApiRequest<any>(searchUrl);\r\n    if (!searchData) {\r\n      return formatResponse(\"No results matching search criteria\", \"text\");\r\n    }\r\n    return formatResponse(searchData, \"json\");\r\n  }\r\n};\r\n"],"mappings":";;;;AAIA,MAAa,mBAAmB;CAC9B,MAAM;CACN,aAAa;CAGb,aAAa;EACX,OAAO,EAAE,QAAQ,CAAC,SAAS,yCAAyC;EACpE,OAAO,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS,kDAAkD;EAC1G;CACD,MAAM,QAAQ,EAAE,OAAO,SAA2C;EAEhE,MAAM,aAAa,MAAM,wBADP,GAAG,OAAO,mBAAmB,0BAA0B,mBAAmB,MAAM,CAAC,SAAS,MAAM,sCAClD;AAChE,MAAI,CAAC,WACH,QAAO,eAAe,uCAAuC,OAAO;AAEtE,SAAO,eAAe,YAAY,OAAO;;CAE5C"}